[←目次に戻る](/README.md)
<br>
# 演習3.2　ALAXALA装置にSmartCS経由で追加設定を行う

## 目次
本演習では以下を行います。 
- STEP1. <code>ax_config</code>を使ってALAXALA装置に追加設定を行う  
- STEP2. <code>ax_config</code>とjinja2 template を組み合わせてALAXALA装置に追加設定を行う


## 演習概要図

> あとで描く

### STEP1. ax_config 使ったPlaybookを作成する

演習3.1でAnsibleからリーチ可能となったALAXALA機器に対して、<code>ax_config</code>を使って追加の設定を行います。
追加で設定する内容は以下となります。
- ルーティングテーブルの追加
- 等々
> できればもう少し実環境で設定するような内容を追加したい。
> ここでNW機器に対してAnsibleを使った設定作業を習得してもらう。


上記を設定するPlaybookは以下となります。
<br>
```
---
- name: '3-2 step1'
  hosts: AX2230
  
  vars:
  - ansible_connection: network_cli
  - ansible_network_os: ax
  - ansible_become: yes
  - ansible_become_method: enable
  - ansible_become_pass: 'secret2230'

  tasks:
  - name: "ax_config"
    ax_config:
      lines:
      - ip route 11.0.0.0 255.0.0.0 10.5.28.1 
      - ip route 12.0.0.0 255.0.0.0 10.5.28.1 
      - ip route 13.0.0.0 255.0.0.0 10.5.28.1 
      - ip route 14.0.0.0 255.0.0.0 10.5.28.1 
      - ip route 15.0.0.0 255.0.0.0 10.5.28.1 
```
<br>
> ALAXALA様に確認頂きたい
> コンフィグはもう少し追加したい。


### STEP2. jinja2 template を使って設定を行う。


### STEPX. 〇〇を使って設定を行う。

- この演習内容がちょっと寂しいので、何か追加したい。  
  一般的なネットワーク機器の追加設定を一通り入れるイメージか。（NTP、ACL等々）
- F5さんやALAXALAさんのハンズオン資料を参考にしてみてあとで追記予定。  
- ネットワーク機器に設定投入する際のテクニック的な演習を織り交ぜてもいいのかもしれません、  
  loop処理とかかな。(routeエントリ とか hostsエントリ とか)
- あとは、冪等性の確認とかでしょうか。
- 設定したコンフィグ情報を最後に取得してローカル（Ansibleホストに保存）とかもいいかもしれません。

[→演習3.3 ALAXALA装置の設定情報を取得する](/3.3-get_alaxala_device_information.md)    
[←演習3.1 ALAXALA装置にSmartCS経由で初期設定を行う](/3.1-initial_setup_the_alaxala_device_via_smartcs.md)    
[↑目次に戻る](/README.md)  

